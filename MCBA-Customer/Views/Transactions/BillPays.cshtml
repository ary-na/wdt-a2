<!-- 
// Code sources and adapted form:
// https://www.aspsnippets.com/Articles/ASPNet-MVC-Pass-Send-data-from-one-cshtml-to-another.aspx
-->

@model IPagedList<MCBA_Customer.Models.BillPay>
@{
    ViewData["Title"] = "Bill Pays";
}

<div class="d-flex flex-column border rounded w-75">
    <h1 class="text-muted p-xl-5">Bill Pays</h1>

    <div class="row px-xl-5">
        <div class="col">
            <table class="table">
                <tr class="text-muted">
                    <th>@Html.DisplayNameFor(x => x[0].BillPayID)</th>
                    <th>@Html.DisplayNameFor(x => x[0].PayeeID)</th>
                    <th>@Html.DisplayNameFor(x => x[0].Amount)</th>
                    <th>@Html.DisplayNameFor(x => x[0].ScheduleTimeUtc)</th>
                    <th>@Html.DisplayNameFor(x => x[0].Period)</th>
                    <th>@Html.DisplayNameFor(x => x[0].BillStatus)</th>
                </tr>
                @foreach (var billPay in Model)
                {
                    var scheduleTimeLocal = billPay.ScheduleTimeUtc.ToLocalTime().ToString("dd/MM/yyyy HH:mm tt");
                    <tr>
                        <td>@Html.DisplayFor(x => billPay.BillPayID)</td>
                        <td>@Html.DisplayFor(x => billPay.PayeeID)</td>
                        <td>$@Html.DisplayFor(x => billPay.Amount)</td>
                        <td>@Html.DisplayFor(x => scheduleTimeLocal)</td>
                        <td>@Html.DisplayFor(x => billPay.Period)</td>
                        <td>@Html.DisplayFor(x => billPay.BillStatus)</td>
                    </tr>
                }
            </table>
        </div>
    </div>


    <div class="d-flex justify-content-center align-content-center pt-xl-3">
        @Html.PagedListPager(Model, page => Url.Action("BillPays", new { Model[0].AccountNumber, page }),
            new PagedListRenderOptions
            {
                LiElementClasses = new[] { "page-item" },
                PageClasses = new[] { "page-link" }
            })
    </div>

    <div class="d-flex justify-content-end align-content-end">
        <a class="btn btn-outline-primary mt-xl-5 mb-xl-5 me-1"
           asp-action="BillPay" asp-route-accountNumber="@ViewBag.AccountNumber">
            Schedule a Bill
        </a>
        <a class="btn btn-outline-primary mt-xl-5 mb-xl-5 me-xl-5"
           asp-action="Index">
            Back to Accounts
        </a>
        <div>
        </div>
    </div>
</div>